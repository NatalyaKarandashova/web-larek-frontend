# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Описание проекта
Проект представляет собой приложение для онлайн-магазина "Web-lerек", реализованное с использование паттерна проектирования MVC. В приложении описываются модели данных, компоненты пользовательского интерфейса и действия пользователя.

## Паттерн проектирования
В данном проекте используется паттерн MVC (Model-View-Controller), который разделяет логику приложения на три основных компонента:
1. Model - отвечает за управление данныеми, правилами бизнес-логики и хранение информации.

2. View - отвечает за отображение данных пользователю и сбор данных от пользователя. Общая логика реализована в базовом классе View. Для каждого экрана создан отдельный подкласс(подробное описание подклассов будет приведено ниже):

- MainScreen - экран витрины;
- ProductDetailsScreen - экран деталей прокутка;
- CartScreen - экран корзины;
- CheckoutPaymentScreen - экран выбора способа оплаты и адреса доставки;
- CheckoutContactScreen - экран ввода email и телефона;
- SuccessScreen - экран успешного заказа.

3. Controller - управляет потоком данных между Model и View, обрабатывая ввод пользователя. Реализован в виде класса Controller.

## Архитектура 
UML-схему проекта можно постреть в следующем фале: web-larek.drawio.jpg

## Базовый код
### Класс Product
Данный класс относится к слою Модель (Model).
Описываетм состав карточки продукта. 
Содержит следующие атрибуты: 
- `id: number` - уникальный идентификатор;
- `name: string`  - название товара;
- `price: number` - цена товара;
- `description: string` -  описание товара;
- `image: string` - изображение товара.

Методы у класс Product отсутствует, так как класс предназначен только для хранения данных. 

### Класс ProductCatalog
Данный класс относится к слою Модель (Model).
Для работы с коллекцией продуктов используется данный класс (управляет списком продуктов). Он включает в себя следующие поля:
- `products: Product[]` - массив объектов `Product`
Методы класса:
- `getCatalog(): Product[]` - возвращает список продуктов;
- `populateCatalog(products: Product[]): void` - заполняет список продуктов;
- `findProductById(id: number): Product | null` - находит продукт по идентификатору.

### Класс CustomerData 
Данный класс относится к слою Модель (Model).
Используется для хранения и обработки данных покупателя и корзины.
Содержит следующие поля: 
- `name: string` - ФИО покупателя; 
- `email: string` - адрес электронной почты покупателя;
- `phone: string` - номер телефона; 
- `address: string` - адрес доставка
- `cartItems: Product[]` - список товаров в корзине;
- `paymentMethod: string` - способ оплаты.

Mетоды класса CustomerData: 
- `addToCart(product: Product): void` - добавляет товар в корзину;
- `removeFromCart(productId: number): void` - удаляет товар из корзины по идентификатору;
- `getCartTotal(): number` - рассчитывает общую стоимость товаров в корзине;
- `clearCart(): void` - очищает корзину;
- `validateData(): boolean` - проверяет, праильно ли заполнены данные покупателя.

### Класс EventEmmiter
Слой данного класса: общий класс для работы с событиями.
Реализует паттерн “Наблюдатель” и позволяет подписываться на события и уведомлять подписчиков о наступлении  события. 
Класс имеет методы on, off, emit - для подписки на событие, отписки от события и уведомления подписчиков о наступлении события соответственно.
Также в классе EventEmmiter содержаться  методы onAll и offAll - необходимы для подписки на все события и сброса всех подписчиков. 
Метод trigger - генерирует заданное событие с заданными аргументами.  Это позволяет передавать его в качестве обработчика события в другие классы. Эти классы будут генерировать события, не будучи при этом напрямую зависимыми от класса  EventEmitter. 

### Класс View 
Данный класс относится к классу представление (View).
Базовый класс для всех экранов. Содержит общие методы отображения и взаимодействия: 
- `renderContent(content: any); void` - отрисовывает переданный контент;
- `updateUI(data: any): void` - обновляет пользовательский интерфейс.

Далее будет описание классов для экранов. все они относятся к слою View.

### Классы для экранов
1. MainScreen - экран витрины, отображет список всех товаров и содержт методы: 
- `showProducts(products: Product[]): void` - отображет список всех товаров на витрине.

2. ProductDetailsScreen - экран деталей товара, отображает подробную информацию о выбранном продукте и содержит метод: 
- `showProductDetails(product: Product): void` - отображает детали выбранного продукта.

3. CartScreen - экран корзины, показывает список товаров в корзине и содержит метод: 
- `showCart(cart: Product[]): void` - отображает содержимое корзины.

4. CheckoutPaymentScreen - экран выбора способа оплаты и адреса доставки. Показывает форму для выбора способа оплаты и ввода адреса доставки, содержит следюущие методы: 
- `showPaymentForm(): void` - отображате форму для выбора способа оплаты;
- `collectPaymentData(): PaymentData` - собирает данные способа оплаты и адреса.

5. CheckoutContactScreen - экран ввода email и телефона. Показывает форму для ввода email  и телефона, содержит следующие методы: 
- `showContactForm(): void` - отображет форму для ввода контактных данных;
- `collectContactData(): ContactData` - собирает данные email и телефона.

6. SuccessScreen - экран успешного заказа, показывает сообщение об успешном оформлении заказа. Содержит следующие методы: 
- `showSuccessMessage(): void` - отображает сообщение об успешном завершении заказа.

### Класс Controller 
Данный класс относится к слою Controller.
Данный класс выполняет роль посредника между моделями Model и представлениями View в архитекутре MVC. 
В конкретном проекте класс Controller связывает слои данных Model и пользовательского интерфейса View, реализует бизнес-логику, связанную с работой приложения. Он получает действия пользователя и передает их в модели для обработки. 
Класс содержит следующие методы: 
- `addToCart(productId: number): void` - добавляет товар в корзину,используя его идентификатор;
- `removeFromCart(productId: number): void` - удаляет товар из корзины по его идентификатору;
- `processCheckout(data: CustomerData): void` - обрабатывает оформление заказа.


## Связи между классами
### Product ➡️ ProductCatalog
Тип связи:Агрегация;
Назначение: ProductCatalog содержит массив объектов Product, но не управляет их жизненным циклом.

### Controller ➡️ ProductCatalog
Тип связи: Ассоциация
Назначение: Controller запрашивает список товаров и ищет товары через методы ProductCatalog.

### Controller ➡️ Product
Тип связи: Ассоциация
Назначение: Controller работает с объектами Product для добавления/удаления товаров в корзине.

### Controller ➡️ CustomerData
Тип связи: Ассоциация
Назначение: Controller управляет данными покупателя, включая корзину.

### Controller ➡️ View
Тип связи: Агрегация
Назначение: Controller управляет представлением, обновляет данные на экранах.

### CustomerData ➡️ Product
Тип связи: Агрегация
Назначение: CustomerData содержит ссылки на товары в корзине (cartItems).

### View ➡️ EventEmitter
Тип связи: Ассоциация
Назначение: View использует брокер событий для обработки событий в интерфейсе.

### View ➡️ Product
Тип связи: Ассоциация
Назначение: Представления используют объекты Product для отображения информации на экранах.

### MainScreen ➡️ View
Тип связи: Специализация
Назначение: MainScreen наследует общую логику отображения из View.

### ProductDetailsScreen ➡️ View
Тип связи: Специализация
Назначение: ProductDetailsScreen наследует от View для реализации экрана деталей товара.

### CartScreen ➡️ View
Тип связи: Специализация
Назначение: CartScreen наследует от View для отображения корзины товаров.

### CheckoutPaymentScreen ➡️ View
Тип связи: Специализация
Назначение: CheckoutPaymentScreen наследует от View для реализации экрана оплаты.

### CheckoutContactScreen ➡️ View
Тип связи: Специализация
Назначение: CheckoutContactScreen наследует от View для экрана ввода контактной информации.

### SuccessScreen ➡️ View
Тип связи: Специализация
Назначение: SuccessScreen наследует от View для отображения результата успешного заказа.
